<div data-name="quiqqer-users-login-container" style="opacity: 0">
    {if $passwordReset}
    <div class="quiqqer-users-login-success">
        {locale group="quiqqer/core" var="users.auth.passwordresetverification.success"}
    </div>
    {/if}

    {assign var="dataGlobalAuth" value=""}
    {if $globalAuth}
    {assign var="dataGlobalAuth" value='data-globalauth="1"'}
    {/if}

    {* SOCIAL LOGINS *}
    <section data-name="social-logins" class="quiqqer-users-login-social">
        {* social logins *}
        {foreach $authenticators as $k => $authenticator}
        {if $authenticator['class'] !== 'QUI\\Users\\Auth\\QUIQQER'}

        <form method="POST"
              name="login"
              data-authenticator="{$authenticator['class']}"
              {$dataGlobalAuth}
        >
            {if $authenticator['instance']->getSecondaryAuthenticationButton()}
                {$authenticator['instance']->getSecondaryAuthenticationButton()->create()}
            {else}
            <button name="show-control" type="button" class="btn btn-primary w-full" style="display: none">
                {$self->renderIcon($authenticator['instance']->getIcon())}
                <span>{$authenticator['instance']->getFrontendTitle()}</span>
            </button>
            {/if}

            <div data-name="quiqqer-users-login-social-control">
                {$authenticator['control']->create()}
            </div>
        </form>
        {/if}
        {/foreach}
    </section>

    {foreach $authenticators as $k => $authenticator}
    {* MAIL LOGIN *}

    {if $authenticator['class'] === 'QUI\\Users\\Auth\\QUIQQER'}

    {if count($authenticators) >= 2 && $authStep !== 'secondary'}
    <div data-name="or-divider" class="quiqqer-login-or">
        <span>
            {locale group="quiqqer/core" var="controls.users.auth.login.or"}
        </span>
    </div>
    {/if}

    <section data-name="mail-logins" class="quiqqer-users-login-form">
        <form method="POST"
              name="login"
              data-authenticator="{$authenticator['class']}"
              {$dataGlobalAuth}
        >
            {if $authenticator['instance']->getSecondaryAuthenticationButton()}
                {$authenticator['instance']->getSecondaryAuthenticationButton()->create()}
            {else}
            <button name="show-control" type="button" class="btn btn-primary w-full" style="display: none">
                {$self->renderIcon($authenticator['instance']->getIcon())}
                <span>{$authenticator['instance']->getFrontendTitle()}</span>
            </button>
            {/if}

            <div data-name="quiqqer-users-login-social-control">
                {$authenticator['control']->create()}
            </div>
        </form>
    </section>

    {/if}
    {/foreach}
</div>