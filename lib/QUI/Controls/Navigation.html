{strip}
{assign var=children value=$Site->getNavigation()}

{if !isset($level)}
    {assign var=level value=1}
{else}
    {assign var=level value=$level+1}
{/if}



{if count( $children )}
<ul class="fa-ul quiqqer-navigation-level-{$level}">

    {if $this->getAttribute('homelink') && $level == 1}
    {assign var=active value=""}
    {if $activeId == $Site->getId()}
    {assign var=active value="quiqqer-navigation-active"}
    {/if}
    <li class="quiqqer-navigation-li">
        <span class="quiqqer-navigation-entry">
            <a href="{url site=$Site}" class="quiqqer-navigation-home {$active} quiqqer-navigation-link">
                {$Site->getAttribute('title')}
            </a>
            <i class="fa-nav fa  fa-home"></i>
        </span>
    </li>
    {/if}


    {foreach from=$children item=Child}
    <li class="quiqqer-navigation-li">

        {assign var=active value=""}
        {if $activeId == $Child->getId()}
            {assign var=active value="quiqqer-navigation-active"}
        {/if}
        <span class="quiqqer-navigation-entry">
            <a href="{url site=$Child}" class="{$active} quiqqer-navigation-link">
                {$Child->getAttribute('title')}
            </a>
            {assign var=subnavigation value=$Child->getNavigation()}
            {if count ( $subnavigation )}
            <i class="fa fa-nav fa-angle-double-down" style="cursor: pointer;"></i>
            {else}
            <i class="fa fa-nav fa-angle-right"></i>
            {/if}
        </span>

        {if $levels === false || $levels-1 >= $level}
            {include file=$navTemplate
                     Site=$Child
                     level=$level
                     levels=$levels
            }
        {/if}
    </li>
    {/foreach}
</ul>
{/if}
{/strip}
