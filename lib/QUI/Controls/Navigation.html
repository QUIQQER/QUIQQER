
{assign var=children value=$Site->getNavigation()}

{if !isset($level)}
    {assign var=level value=1}
{else}
    {assign var=level value=$level+1}
{/if}

{if $this->getAttribute('homelink') && $level == 1}
    {assign var=active value=""}
    {if $activeId == $Site->getId()}
        {assign var=active value="quiqqer-navigation-active"}
    {/if}
    <a href="{url site=$Site}" class="quiqqer-navigation-home {$active}">
        <span class="quiqqer-navigation-text">
            {$Site->getAttribute('title')}
        </span>
    </a>
{/if}

{if count( $children )}
<ul class="quiqqer-navigation-level-{$level}">
    {foreach from=$children item=Child}
    <li>
        {assign var=active value=""}
        {if $activeId == $Child->getId()}
            {assign var=active value="quiqqer-navigation-active"}
        {/if}
        <a href="{url site=$Child}" class="{$active}">
            <span class="quiqqer-navigation-text">
                {$Child->getAttribute('title')}
            </span>
        </a>

        {if $levels === false || $levels-1 >= $level}
            {include file=$navTemplate
                     Site=$Child
                     level=$level
                     levels=$levels
            }
        {/if}
    </li>
    {/foreach}
</ul>
{/if}
